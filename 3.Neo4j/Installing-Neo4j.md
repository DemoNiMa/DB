# **Установка и настройка Redis на Ubuntu 22.04**


## 1. Установка Neo4j

**1.  Обновите пакеты:**
```
sudo apt update && sudo apt upgrade -y
```

**2. Установите Neo4j**:

 Официальные репозитории пакетов Ubuntu не содержат копии ядра базы данных Neo4j. Чтобы установить апстрим пакет из Neo4j, необходимо добавить ключ GPG (чтобы убедиться, что вы загружаете валидный пакет). Затем нужно будет добавить новый источник пакета, ведущий к репозиторию программного обеспечения Neo4j, и, наконец, установить пакет.
 
***
> Для корректной работы Neo4j требуется **Java 11**. Нужно установить **OpenJDK 11** или **Oracle JDK 11**:
```
sudo apt update 
sudo apt install openjdk-11-jdk
java -version
```
Если версия не 11, установите её как default:
```
sudo update-alternatives --config java
```
***
Для начала запустите следующую команду curl и направьте ее вывод в команду gpg –dearmor. Это преобразует загруженный ключ в формат, который apt может использовать для проверки пакетов:
```
curl -fsSL https://debian.neo4j.com/neotechnology.gpg.key |sudo gpg --dearmor -o /usr/share/keyrings/neo4j.gpg
```
Затем добавьте репозиторий Neo4j 4.1 в исходники APT системы:
```
echo "deb [signed-by=/usr/share/keyrings/neo4j.gpg] https://debian.neo4j.com stable 4.1" | sudo tee -a /etc/apt/sources.list.d/neo4j.list
```
Часть [signed-by=/usr/share/keyrings/neo4j.gpg] позволяет менеджеру apt использовать ключ, который вы загрузили для подтверждения пакета и другой информации о neo4j.

Следующий шаг — обновить списки пакетов, а затем установить пакет Neo4j и все его зависимости. Это также загрузит и установит совместимый пакет Java, поэтому вы можете ввести Y, когда команда apt предложит вам установить все зависимости:
```
sudo apt update  
sudo apt install neo4j
```

После завершения установки Neo4j должен запуститься. Однако при перезагрузке вашей системы он не запустится автоматически. Последний шаг настройки — включить Neo4j как сервис, а также запустить его:
```
sudo systemctl enable neo4j.service
sudo systemctl start neo4j.service
```


 **Логи + журнал:   `sudo journalctl -u neo4j`**


## 2. Настройка (Дальше бога нет)
Проверять зависимости и соотношение версий =(

**1. Откройте файл конфигурации:**
```
sudo nano /etc/neo4j/neo4j.conf
```
**2. Убедитесь, что следующие строки не закомментированы и настроены правильно:**
```
# Позволяет подключение из любого IP
dbms.default_listen_address=0.0.0.0

# Настройка HTTP интерфейса на порт 7474
dbms.connector.http.listen_address=:7474

# Настройка для Bolt на порт 7687
dbms.connector.bolt.listen_address=:7687

```

> **Важно:**
> -   `dbms.default_listen_address` должен быть `0.0.0.0` для доступа извне.
> -   Порт `7474` для HTTP и `7687` для Bolt должны быть указаны.

Сохраните изменения и перезапустите Neo4j:
```
sudo systemctl restart neo4j
```
**3. Проверьте права доступа и отсутствие блокировок**
```
sudo netstat -tuln | grep 7474
```
Если Neo4j был запущен, но порты 7474 и 7687 не появляются в `netstat`, это может быть связано с брандмауэром или правами доступа.
* Откройте необходимые порты:
```
sudo ufw allow 7474/tcp
sudo ufw allow 7687/tcp
```
После этого перезапустите Neo4j и проверьте снова, открыты ли порты::
```
sudo systemctl restart neo4j
sudo netstat -tuln
```
